# 799. Champagne Tower
###### tags: `LeetCode`
## **Link**
https://leetcode.com/problems/champagne-tower
## **Code**
```cpp=
class Solution {
public:
    double champagneTower(int poured, int query_row, int query_glass) 
    {
        // 特判：如果問的是最頂端的杯子 // 因為我寫的沒辦法處理這個情況
        if(query_row==0 && query_glass==0)
            return (poured!=0)?1.0:0.0;
        // 歸成-1 代表沒走過
        for(int i=0;i<101;++i)
            for(int j=0;j<101;++j)
                dp[i][j]=-1;
        // 頂端初始化
        dp[0][0]=max(0.0,(double)(poured-1)/2);
        // 求解
        return min(1.0,solve(query_row-1,query_glass-1)+solve(query_row-1,query_glass));
    }
private:
    // 定義：dp[i][j]代表第i列第j個會溢出多少液體
    double dp[101][101];
    double solve(int i, int j)
    {
        // 如果這組(i,j)是不合法的 // 第i排的杯子編號是從0到i-1
        if(j<0 || j>i)
            return 0;
        // 看這個杯子之前有沒有算過
        if(dp[i][j]!=-1)
            return dp[i][j];
        else
            return dp[i][j]=max(0.0,((double)(solve(i-1,j-1)+solve(i-1,j))-1)/2);
    }
};
```
## date
**2023.09.25**
