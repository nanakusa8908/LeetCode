# 135. Candy
###### tags: `LeetCode`
## **Link**
https://leetcode.com/problems/candy/description/
## **Code**
```cpp=
class Solution {
public:
    int candy(vector<int>& ratings) 
    {
        int n=ratings.size();
        vector<int> vt(n,1);
        // 假設左點為最低點（邊緣）
        for(int i=1;i<n;++i)
        {
            if(ratings[i]<=ratings[i-1])
                break;
            vt[i]=max(vt[i],vt[i-1]+1);
        }
        // 假設右邊為最低點（邊緣）
        for(int i=n-2;i>=0;--i)
        {
            if(ratings[i]<=ratings[i+1])
                break;
            vt[i]=max(vt[i],vt[i+1]+1);
        }
        // 跑一遍陣列
        for(int i=1;i<n-1;++i)
        {
            // 尋找可能的最低點
            if(ratings[i-1]>=ratings[i] && ratings[i]<=ratings[i+1])
            {
                // 低點往左維護vt
                for(int j=i-1;j>=0 && ratings[j]>ratings[j+1];--j)
                    vt[j]=max(vt[j],vt[j+1]+1);
                // 低點往右維護vt
                for(int j=i+1;j<n && ratings[j]>ratings[j-1];++j)
                    vt[j]=max(vt[j],vt[j-1]+1);
            }
        }
        int ans=0;
        // 全部加起來
        for(int &v:vt)
            ans+=v;
        return ans;
    }
};
```
## date
**2023.09.13**
